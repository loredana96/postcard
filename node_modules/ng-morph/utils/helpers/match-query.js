"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.matchQuery = void 0;
const minimatch = require("minimatch");
const utils_1 = require("ng-morph/utils");
function isObject(value) {
    return value !== null && typeof value === 'object';
}
function coerceName(name) {
    if (!isObject(name)) {
        return name;
    }
    return 'name' in name ? name['name'] : name;
}
function matchQuery(value, query) {
    return (!query ||
        Object.keys(query).every((key) => utils_1.coerceArray(value[key])
            .map(coerceName)
            .some((v) => {
            const patterns = utils_1.coerceArray(query[key]);
            return typeof v === 'string'
                ? patterns.some((pattern) => pattern && minimatch(v, pattern))
                : patterns.includes(v);
        })));
}
exports.matchQuery = matchQuery;
//# sourceMappingURL=match-query.js.map